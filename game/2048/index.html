<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2048</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

</head>
<body>
    <!-- Common header/footer will be injected by script -->
    <main>
        <section class="page-section active">
            <div class="content-container">
                <h2>2048</h2>
                <div class="tool-card">
                    <div class="game-info">
                        <div class="score-box-container">
                            <div class="score-box">SCORE<br><span id="score">0</span></div>
                            <div class="score-box">BEST<br><span id="best-score">0</span></div>
                        </div>
                        <button id="new-game-btn">New Game</button>
                    </div>
                    <div class="game-wrapper mx-auto" style="max-width: 400px;">
                        <div id="grid-container"></div>
                        <div id="tile-container"></div>
                        <div id="game-overlay" class="game-overlay">
                            <div id="game-overlay-message" class="game-overlay-message"></div>
                            <button class="button">다시하기</button>
                        </div>
                    </div>
                </div>
                <div id="tool-description" class="tool-card" style="display: none;"></div>
            </div>
        </section>
    </main>

    <script type="module">
        import { createHeader, createFooter } from '../../assets/js/common-components.js';
        import { initTheme } from '../../assets/js/modules/theme.js';
        import { init2048Game } from './2048.js';

        document.body.prepend(createHeader());
        document.body.append(createFooter());
        initTheme();
        init2048Game();

        async function loadDescription() {
            const descriptionEl = document.getElementById('tool-description');
            try {
                const response = await fetch('./description.md');
                if (!response.ok) return;
                const markdown = await response.text();
                descriptionEl.innerHTML = marked.parse(markdown);
                descriptionEl.style.display = 'block';
            } catch (error) {
                console.error('Error loading description:', error);
                descriptionEl.style.display = 'none';
            }
        }
        loadDescription();
    </script>
</body>
</html>
